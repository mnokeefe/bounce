!function(){var e,t,n,a,o=Matter.Engine,r=(Matter.Gui,Matter.World),d=Matter.Bodies,i=(Matter.Body,Matter.Composite),c=(Matter.Composites,Matter.Common),l=(Matter.Constraint,Matter.MouseConstraint),s=Matter.Events,u={},m=(io(),"game");u.init=function(){var t=document.getElementById("canvas-container"),n=document.getElementById("bomb-start");n.addEventListener("click",function(){n.style.display="none",e=o.create(t,{render:{options:{wireframes:!1,showAngleIndicator:!1,showDebug:!1}}}),u.fullscreen(),setTimeout(function(){o.run(e),u.updateScene()},800)}),window.addEventListener("deviceorientation",u.updateGravity,!0),window.addEventListener("touchstart",u.fullscreen),window.addEventListener("orientationchange",function(){u.updateGravity(),u.updateScene(),u.fullscreen()},!1)},window.addEventListener("load",u.init),u.game=function(){function n(){var e=t*Math.random(),n=d.circle(e,50,60,{friction:.01,restitution:.9},40);a=0,r.addBody(o,n),window.bomb=n}var o=e.world;u.reset(),r.add(o,l.create(e)),window.addBomb=n,s.on(e,"collisionStart",function(e){for(var t=e.pairs,n=0;n<t.length;n++){var r=t[n];1===r.bodyA.groupId?(i.removeBody(o,r.bodyB),passTheBomb()):2===r.bodyA.groupId&&(a+=1),a>3&&(console.log("TODO: Handle the explosion here"),i.removeBody(o,r.bodyB),explode())}})},u.updateScene=function(){if(e){t=document.documentElement.clientWidth,n=document.documentElement.clientHeight;var a=e.world.bounds.max,o=e.render.options,r=e.render.canvas;a.x=t,a.y=n,r.width=o.width=t,r.height=o.height=n,u[m]()}},u.updateGravity=function(){if(e){var t=window.orientation,n=e.world.gravity;0===t?(n.x=c.clamp(event.gamma,-90,90)/90,n.y=c.clamp(event.beta,-90,90)/90):180===t?(n.x=c.clamp(event.gamma,-90,90)/90,n.y=c.clamp(-event.beta,-90,90)/90):90===t?(n.x=c.clamp(event.beta,-90,90)/90,n.y=c.clamp(-event.gamma,-90,90)/90):-90===t&&(n.x=c.clamp(-event.beta,-90,90)/90,n.y=c.clamp(event.gamma,-90,90)/90)}},u.fullscreen=function(){var t=e.render.canvas;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||(t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},u.reset=function(){var a=e.world;c._seed=2,r.clear(a),o.clear(e);var i=5;r.addBody(a,d.rectangle(.5*t,-200,t+.5,20.5,{density:0,groupId:1,isStatic:!0,render:{fillStyle:"#edc51e",strokeStyle:"#b5a91c"}})),r.addBody(a,d.rectangle(.5*t,n+i,t+.5,50.5,{groupId:2,isStatic:!0})),r.addBody(a,d.rectangle(t+i,.5*n,50.5,n+200.5,{isStatic:!0})),r.addBody(a,d.rectangle(-i,.5*n,50.5,n+200.5,{isStatic:!0}))}}();